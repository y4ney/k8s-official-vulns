---在 kubectl 版本 v1.13.10、v1.14.6 和 v1.15.3 中发现了一个安全漏洞。该漏洞属于中等严重级别，建议升级 kubectl 以修复此漏洞。

**我是否受影响？**

运行 `kubectl version --client`，如果返回的版本是 v1.13.10、v1.14.6 或 v1.15.3，则表示您正在运行存在漏洞的版本。

**如何升级？**

请按照[此处](https://kubernetes.io/docs/tasks/tools/install-kubectl/)的安装说明进行操作。

**漏洞详情**

该漏洞的细节与 CVE-2019-1002101 和 CVE-2019-11246 非常相似。  
在 kubectl cp 中发现了一个漏洞，该漏洞允许通过两个符号链接的组合将文件复制到目标目录之外。攻击者可以利用此漏洞通过符号链接在目标目录树之外放置恶意文件。

此问题被记录为 CVE-2019-11251。

我们制定了两个修复方案：一个是彻底移除符号链接支持的方案，另一个是通过 cherry pick 确保向后兼容性的方案。

主修复方案在 v1.16.0 中实现（参见 https://github.com/kubernetes/kubernetes/pull/82143），移除了 kubectl cp 对符号链接的支持。1.16.0 版本之后，建议使用 exec+tar 组合替代符号链接功能。

第二个修复方案应用于 1.15.4 版本，并向后移植到 1.14.7 和 1.13.11 版本。该方案修改了 kubectl cp 解压符号链接的逻辑，改为在所有常规文件解压完成后再解压符号链接，从而确保无法通过符号链接写入文件。

1.15.4 版本的修复参见 https://github.com/kubernetes/kubernetes/pull/82384。以下是从该修复方案 cherry pick 到早期版本的提交：  
- 1.14.7 版本参见 https://github.com/kubernetes/kubernetes/pull/82502  
- 1.13.11 版本参见 https://github.com/kubernetes/kubernetes/pull/82503  

感谢 Erik Sjölund (@eriksjolund) 发现此问题，感谢 Tim Allclair 和 Maciej Szulik 提供的修复方案，以及补丁发布经理将修复包含在发布版本中。

/close