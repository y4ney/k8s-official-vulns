---### 问题详情  
在 [ingress-nginx](https://github.com/kubernetes/ingress-nginx) 中发现一个安全问题：能够创建或更新 Ingress 对象的用户，可利用 Ingress 对象（属于 `networking.k8s.io` 或 `extensions` API 组）中的 `.metadata.annotations` 获取 ingress-nginx 控制器的凭据。在默认配置下，该凭据拥有访问集群中所有 Secret 的权限。  

此问题被评级为 **高危**（[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:L/A:L](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:L/A:L)），并分配了 **CVE-2021-25746**。  

### 受影响组件与配置  
此漏洞影响 ingress-nginx。若集群中未安装 ingress-nginx，则不受影响。可通过运行 `kubectl get po -n ingress-nginx` 确认。  

允许非管理员用户创建 Ingress 对象的多租户环境受此问题影响最大。  

#### 受影响版本  
- <v1.2.0  

#### 已修复版本  
- v1.2.0-beta.0  
- v1.2.0  

### 缓解措施  
若无法立即部署修复版本，可通过实施准入策略限制 `metadata.annotations` 的值为已知安全值来缓解此漏洞（参考新增的 [rules](https://github.com/kubernetes/ingress-nginx/blame/main/internal/ingress/inspector/rules.go) 或建议的 [annotation-value-word-blocklist](https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/#annotation-value-word-blocklist) 配置）。  

### 检测  
若发现此漏洞被利用的迹象，请联系 [security@kubernetes.io](mailto:security@kubernetes.io)。  

### 补充信息  
更多细节参见 ingress-nginx Issue [#8503](https://github.com/kubernetes/kubernetes/issues/126813)。  

### 致谢  
此漏洞由 Anthony Weems 以及 jeffrey&oliver 分别报告。  

此致，  
Kubernetes 安全响应委员会代表 CJ Cullen