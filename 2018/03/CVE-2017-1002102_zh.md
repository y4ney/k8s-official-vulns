---[CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:H](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:H)

该漏洞允许使用 secret、configMap、projected 或 downwardAPI 卷的容器触发删除其运行节点上的任意文件和目录。

感谢 Red Hat 的 Joel Smith 报告此问题。

**受影响版本：**
* Kubernetes 1.3.x-1.6.x
* Kubernetes 1.7.0-1.7.13
* Kubernetes 1.8.0-1.8.8
* Kubernetes 1.9.0-1.9.3

**受影响配置：**
* 运行挂载了 secret、configMap、downwardAPI 或 projected 卷（包括自动挂载的服务账号令牌）的不可信容器的集群。

**漏洞影响：**
在挂载了 secret、configMap、downwardAPI 或 projected 卷（包括自动挂载的服务账号令牌）的 Pod 中运行的恶意容器，可导致 Kubelet 删除宿主机文件系统上的任意文件或目录。

**升级前的缓解措施：**
禁止容器使用 secret、configMap、downwardAPI 和 projected 卷运行（注意这会阻止 Pod 使用服务账号令牌，并需要配置 [`automountServiceAccountToken: false`](https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server)）

**已修复版本：**
* v1.7.14 通过 #60516 修复
* v1.8.9 通过 #60515 修复
* v1.9.4 通过 #60258 修复
* master 分支通过 #58720 修复（包含在 v1.10.0-beta.1 及更高版本，将随 v1.10.0 发布）

**修复影响：**
secret、configMap、downwardAPI 和 projected 卷将以只读卷形式挂载。尝试写入这些卷的应用程序将收到只读文件系统错误。此前系统允许应用程序修改这些卷，但会在任意时间间隔后还原这些更改。应重新配置应用程序，将派生文件写入其他位置。