---
**问题详情**  
Kubernetes 中发现一个安全漏洞，允许具有创建 Pod 权限的用户利用 gitRepo 卷访问同节点上其他 Pod 的本地 git 仓库。  
该漏洞被评定为**中危**（[CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:U/C:H/I:H/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:U/C:H/I:H/A:N)，评分 6.5），编号为 CVE-2025-1767。

**影响范围**  

此 CVE 仅影响使用内置 gitRepo 卷从同节点其他 Pod 克隆 git 仓库的 Kubernetes 集群。由于内置 gitRepo 卷功能已被弃用且上游不再提供安全更新，任何仍使用此功能的集群均存在风险。  
受影响组件  
kubelet  

**受影响版本**  
所有 Kubernetes 版本  

**缓解措施**  

如需缓解此漏洞，必须改用 init 容器执行 git clone 操作，然后将目录挂载到 Pod 的容器中。具体示例可参考[此处](https://gist.github.com/tallclair/849601a16cebeee581ef2be50c351841)。  

注：也可通过 ValidatingAdmissionPolicy 或 Restricted Pod 安全标准策略限制集群中使用 gitRepo 卷。以下通用表达式语言 (CEL) 表达式可用于策略中拒绝 gitRepo 卷的使用：  
`has(object.spec.volumes) || !object.spec.volumes.exists(v, has(v.gitRepo))`  

**检测方法**  

执行以下命令可列出所有使用内置 gitRepo 卷并克隆到 .git 子目录的 Pod：  
`kubectl get pods --all-namespaces -o json | jq '.items[] | select(.spec.volumes[].gitRepo.repository | test("^/")) | {name: .metadata.name, namespace: .metadata.namespace, repository: (.spec.volumes[] | select(.gitRepo) | .gitRepo.repository)}'`  

若发现漏洞利用迹象，请联系 [security@kubernetes.io](mailto:security@kubernetes.io)。  

**致谢**  
此漏洞由 Christophe Hauquiert 报告。